-- -------------------------------------------------------------
-- 
-- File Name: hdl_prj\hdlsrc\mw_ssrconverter\mw_ssrconverter_src_SSR_Subset_Converter.vhd
-- Created: 2020-12-22 10:57:15
-- 
-- Generated by MATLAB 9.8 and HDL Coder 3.16
-- 
-- 
-- -------------------------------------------------------------
-- Rate and Clocking Details
-- -------------------------------------------------------------
-- Model base rate: 3.90625e-09
-- Target subsystem base rate: 3.90625e-09
-- 
-- 
-- Clock Enable  Sample Time
-- -------------------------------------------------------------
-- ce_out        3.90625e-09
-- -------------------------------------------------------------
-- 
-- 
-- Output Signal                 Clock Enable  Sample Time
-- -------------------------------------------------------------
-- Valid_Real_Out                ce_out        3.90625e-09
-- Data_Real_Out                 ce_out        3.90625e-09
-- User_Real_Out                 ce_out        3.90625e-09
-- Last_Real_Out                 ce_out        3.90625e-09
-- Valid_Imag_Out                ce_out        3.90625e-09
-- Data_Imag_Out                 ce_out        3.90625e-09
-- User_Imag_Out                 ce_out        3.90625e-09
-- Last_Imag_Out                 ce_out        3.90625e-09
-- -------------------------------------------------------------
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: mw_ssrconverter_src_SSR_Subset_Converter
-- Source Path: mw_ssrconverter/SSR Subset Converter
-- Hierarchy Level: 0
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;

ENTITY mw_ssrconverter_src_SSR_Subset_Converter IS
  PORT( clk                               :   IN    std_logic;
        reset                             :   IN    std_logic;
        clk_enable                        :   IN    std_logic;
        Packet_Size                       :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
        SSR_Mode                          :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
        Valid_Real_In                     :   IN    std_logic;
        Data_Real_In                      :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
        Valid_Imag_In                     :   IN    std_logic;
        Data_Imag_In                      :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
        ce_out                            :   OUT   std_logic;
        Valid_Real_Out                    :   OUT   std_logic;
        Data_Real_Out                     :   OUT   std_logic_vector(15 DOWNTO 0);  -- uint16
        User_Real_Out                     :   OUT   std_logic;
        Last_Real_Out                     :   OUT   std_logic;
        Valid_Imag_Out                    :   OUT   std_logic;
        Data_Imag_Out                     :   OUT   std_logic_vector(15 DOWNTO 0);  -- uint16
        User_Imag_Out                     :   OUT   std_logic;
        Last_Imag_Out                     :   OUT   std_logic
        );
END mw_ssrconverter_src_SSR_Subset_Converter;


ARCHITECTURE rtl OF mw_ssrconverter_src_SSR_Subset_Converter IS

  -- Component Declarations
  COMPONENT mw_ssrconverter_src_SSR_Serializer_Real
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          SSR_Control                     :   IN    std_logic_vector(3 DOWNTO 0);  -- ufix4
          Valid_In                        :   IN    std_logic;
          Data_In                         :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
          Valid_Out                       :   OUT   std_logic;
          Data_Out                        :   OUT   std_logic_vector(127 DOWNTO 0)  -- ufix128
          );
  END COMPONENT;

  COMPONENT mw_ssrconverter_src_SSR_Packet_Generator_Real
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          Frame_Drop                      :   IN    std_logic_vector(3 DOWNTO 0);  -- ufix4
          Valid_In                        :   IN    std_logic;
          Data_In                         :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
          Packet_Size                     :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
          Valid_Out                       :   OUT   std_logic;
          Data_Out                        :   OUT   std_logic_vector(127 DOWNTO 0);  -- ufix128
          SoF_Out                         :   OUT   std_logic;
          EoF_Out                         :   OUT   std_logic
          );
  END COMPONENT;

  COMPONENT mw_ssrconverter_src_SSR_Deserializer_Real
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          Valid_In                        :   IN    std_logic;
          Data_In                         :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
          SoF_In                          :   IN    std_logic;
          EoF_In                          :   IN    std_logic;
          Valid_Out                       :   OUT   std_logic;
          Data_Out                        :   OUT   std_logic_vector(15 DOWNTO 0);  -- uint16
          SoF_Out                         :   OUT   std_logic;
          EoL_Out                         :   OUT   std_logic
          );
  END COMPONENT;

  COMPONENT mw_ssrconverter_src_SSR_Serializer_Imag
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          SSR_Control                     :   IN    std_logic_vector(3 DOWNTO 0);  -- ufix4
          Valid_In                        :   IN    std_logic;
          Data_In                         :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
          Valid_Out                       :   OUT   std_logic;
          Data_Out                        :   OUT   std_logic_vector(127 DOWNTO 0)  -- ufix128
          );
  END COMPONENT;

  COMPONENT mw_ssrconverter_src_SSR_Packet_Generator_Imag
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          Frame_Drop                      :   IN    std_logic_vector(3 DOWNTO 0);  -- ufix4
          Valid_In                        :   IN    std_logic;
          Data_In                         :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
          Packet_Size                     :   IN    std_logic_vector(31 DOWNTO 0);  -- uint32
          Valid_Out                       :   OUT   std_logic;
          Data_Out                        :   OUT   std_logic_vector(127 DOWNTO 0);  -- ufix128
          SoF_Out                         :   OUT   std_logic;
          EoF_Out                         :   OUT   std_logic
          );
  END COMPONENT;

  COMPONENT mw_ssrconverter_src_SSR_Deserializer_Imag
    PORT( clk                             :   IN    std_logic;
          reset                           :   IN    std_logic;
          enb                             :   IN    std_logic;
          Valid_In                        :   IN    std_logic;
          Data_In                         :   IN    std_logic_vector(127 DOWNTO 0);  -- ufix128
          SoF_In                          :   IN    std_logic;
          EoF_In                          :   IN    std_logic;
          Valid_Out                       :   OUT   std_logic;
          Data_Out                        :   OUT   std_logic_vector(15 DOWNTO 0);  -- uint16
          SoF_Out                         :   OUT   std_logic;
          EoL_Out                         :   OUT   std_logic
          );
  END COMPONENT;

  -- Component Configuration Statements
  FOR ALL : mw_ssrconverter_src_SSR_Serializer_Real
    USE ENTITY work.mw_ssrconverter_src_SSR_Serializer_Real(rtl);

  FOR ALL : mw_ssrconverter_src_SSR_Packet_Generator_Real
    USE ENTITY work.mw_ssrconverter_src_SSR_Packet_Generator_Real(rtl);

  FOR ALL : mw_ssrconverter_src_SSR_Deserializer_Real
    USE ENTITY work.mw_ssrconverter_src_SSR_Deserializer_Real(rtl);

  FOR ALL : mw_ssrconverter_src_SSR_Serializer_Imag
    USE ENTITY work.mw_ssrconverter_src_SSR_Serializer_Imag(rtl);

  FOR ALL : mw_ssrconverter_src_SSR_Packet_Generator_Imag
    USE ENTITY work.mw_ssrconverter_src_SSR_Packet_Generator_Imag(rtl);

  FOR ALL : mw_ssrconverter_src_SSR_Deserializer_Imag
    USE ENTITY work.mw_ssrconverter_src_SSR_Deserializer_Imag(rtl);

  -- Signals
  SIGNAL SSR_Mode_unsigned                : unsigned(31 DOWNTO 0);  -- uint32
  SIGNAL Bit_Slice_out1                   : unsigned(3 DOWNTO 0);  -- ufix4
  SIGNAL SSR_Serializer_Real_out1         : std_logic;
  SIGNAL y                                : std_logic_vector(127 DOWNTO 0);  -- ufix128
  SIGNAL SSR_Packet_Generator_Real_out1   : std_logic;
  SIGNAL y_1                              : std_logic_vector(127 DOWNTO 0);  -- ufix128
  SIGNAL SSR_Packet_Generator_Real_out3   : std_logic;
  SIGNAL SSR_Packet_Generator_Real_out4   : std_logic;
  SIGNAL SSR_Deserializer_Real_out1       : std_logic;
  SIGNAL SSR_Deserializer_Real_out2       : std_logic_vector(15 DOWNTO 0);  -- ufix16
  SIGNAL SSR_Deserializer_Real_out3       : std_logic;
  SIGNAL SSR_Deserializer_Real_out4       : std_logic;
  SIGNAL SSR_Serializer_Imag_out1         : std_logic;
  SIGNAL y_2                              : std_logic_vector(127 DOWNTO 0);  -- ufix128
  SIGNAL SSR_Packet_Generator_Imag_out1   : std_logic;
  SIGNAL y_3                              : std_logic_vector(127 DOWNTO 0);  -- ufix128
  SIGNAL SSR_Packet_Generator_Imag_out3   : std_logic;
  SIGNAL SSR_Packet_Generator_Imag_out4   : std_logic;
  SIGNAL SSR_Deserializer_Imag_out1       : std_logic;
  SIGNAL SSR_Deserializer_Imag_out2       : std_logic_vector(15 DOWNTO 0);  -- ufix16
  SIGNAL SSR_Deserializer_Imag_out3       : std_logic;
  SIGNAL SSR_Deserializer_Imag_out4       : std_logic;

BEGIN
  u_SSR_Serializer_Real : mw_ssrconverter_src_SSR_Serializer_Real
    PORT MAP( clk => clk,
              reset => reset,
              enb => clk_enable,
              SSR_Control => std_logic_vector(Bit_Slice_out1),  -- ufix4
              Valid_In => Valid_Real_In,
              Data_In => Data_Real_In,  -- ufix128
              Valid_Out => SSR_Serializer_Real_out1,
              Data_Out => y  -- ufix128
              );

  u_SSR_Packet_Generator_Real : mw_ssrconverter_src_SSR_Packet_Generator_Real
    PORT MAP( clk => clk,
              reset => reset,
              enb => clk_enable,
              Frame_Drop => std_logic_vector(Bit_Slice_out1),  -- ufix4
              Valid_In => SSR_Serializer_Real_out1,
              Data_In => y,  -- ufix128
              Packet_Size => Packet_Size,  -- uint32
              Valid_Out => SSR_Packet_Generator_Real_out1,
              Data_Out => y_1,  -- ufix128
              SoF_Out => SSR_Packet_Generator_Real_out3,
              EoF_Out => SSR_Packet_Generator_Real_out4
              );

  u_SSR_Deserializer_Real : mw_ssrconverter_src_SSR_Deserializer_Real
    PORT MAP( clk => clk,
              reset => reset,
              enb => clk_enable,
              Valid_In => SSR_Packet_Generator_Real_out1,
              Data_In => y_1,  -- ufix128
              SoF_In => SSR_Packet_Generator_Real_out3,
              EoF_In => SSR_Packet_Generator_Real_out4,
              Valid_Out => SSR_Deserializer_Real_out1,
              Data_Out => SSR_Deserializer_Real_out2,  -- uint16
              SoF_Out => SSR_Deserializer_Real_out3,
              EoL_Out => SSR_Deserializer_Real_out4
              );

  u_SSR_Serializer_Imag : mw_ssrconverter_src_SSR_Serializer_Imag
    PORT MAP( clk => clk,
              reset => reset,
              enb => clk_enable,
              SSR_Control => std_logic_vector(Bit_Slice_out1),  -- ufix4
              Valid_In => Valid_Imag_In,
              Data_In => Data_Imag_In,  -- ufix128
              Valid_Out => SSR_Serializer_Imag_out1,
              Data_Out => y_2  -- ufix128
              );

  u_SSR_Packet_Generator_Imag : mw_ssrconverter_src_SSR_Packet_Generator_Imag
    PORT MAP( clk => clk,
              reset => reset,
              enb => clk_enable,
              Frame_Drop => std_logic_vector(Bit_Slice_out1),  -- ufix4
              Valid_In => SSR_Serializer_Imag_out1,
              Data_In => y_2,  -- ufix128
              Packet_Size => Packet_Size,  -- uint32
              Valid_Out => SSR_Packet_Generator_Imag_out1,
              Data_Out => y_3,  -- ufix128
              SoF_Out => SSR_Packet_Generator_Imag_out3,
              EoF_Out => SSR_Packet_Generator_Imag_out4
              );

  u_SSR_Deserializer_Imag : mw_ssrconverter_src_SSR_Deserializer_Imag
    PORT MAP( clk => clk,
              reset => reset,
              enb => clk_enable,
              Valid_In => SSR_Packet_Generator_Imag_out1,
              Data_In => y_3,  -- ufix128
              SoF_In => SSR_Packet_Generator_Imag_out3,
              EoF_In => SSR_Packet_Generator_Imag_out4,
              Valid_Out => SSR_Deserializer_Imag_out1,
              Data_Out => SSR_Deserializer_Imag_out2,  -- uint16
              SoF_Out => SSR_Deserializer_Imag_out3,
              EoL_Out => SSR_Deserializer_Imag_out4
              );

  SSR_Mode_unsigned <= unsigned(SSR_Mode);

  Bit_Slice_out1 <= SSR_Mode_unsigned(3 DOWNTO 0);

  ce_out <= clk_enable;

  Valid_Real_Out <= SSR_Deserializer_Real_out1;

  Data_Real_Out <= SSR_Deserializer_Real_out2;

  User_Real_Out <= SSR_Deserializer_Real_out3;

  Last_Real_Out <= SSR_Deserializer_Real_out4;

  Valid_Imag_Out <= SSR_Deserializer_Imag_out1;

  Data_Imag_Out <= SSR_Deserializer_Imag_out2;

  User_Imag_Out <= SSR_Deserializer_Imag_out3;

  Last_Imag_Out <= SSR_Deserializer_Imag_out4;

END rtl;

